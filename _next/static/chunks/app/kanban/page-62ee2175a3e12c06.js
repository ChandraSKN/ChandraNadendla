(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{2411:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var d=t(5155),n=t(2115),l=t(5294);let a=(0,t(4982).UU)("https://rkowgbocbhrkagikzcpb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrb3dnYm9jYmhya2FnaWt6Y3BiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAwNzQ4ODMsImV4cCI6MjA2NTY1MDg4M30.I36ZsWTPBO2Ki25iX8ZJYTcVXsvWhPakp1eovPpDwvc"),i={columns:{todo:{id:"todo",title:"To Do",taskIds:[]},"in-progress":{id:"in-progress",title:"In Progress",taskIds:[]},done:{id:"done",title:"Done",taskIds:[]}},tasks:{},columnOrder:["todo","in-progress","done"]};function r(){let[e,s]=(0,n.useState)(null),[t,r]=(0,n.useState)({}),[o,c]=(0,n.useState)({id:null,text:""}),[x,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a.from("kanban_boards").select("data").order("inserted_at",{ascending:!1}).limit(1).single().then(e=>{let{data:t,error:d}=e;if(d||!t)return s(i);s(t.data)})},[]),(0,n.useEffect)(()=>{e&&(u(!0),a.from("kanban_boards").insert([{data:e}]).then(()=>u(!1)))},[e]);let m=(0,n.useCallback)(t=>{if(!t.destination)return;let{source:d,destination:n,draggableId:l}=t;if(d.droppableId===n.droppableId&&d.index===n.index)return;let a=e.columns[d.droppableId],i=e.columns[n.droppableId];if(a===i){let e=Array.from(a.taskIds);e.splice(d.index,1),e.splice(n.index,0,l);let t={...a,taskIds:e};s(e=>({...e,columns:{...e.columns,[t.id]:t}}));return}let r=Array.from(a.taskIds);r.splice(d.index,1);let o={...a,taskIds:r},c=Array.from(i.taskIds);c.splice(n.index,0,l);let x={...i,taskIds:c};s(e=>({...e,columns:{...e.columns,[o.id]:o,[x.id]:x}}))},[e]),p=e=>{let d=(t[e]||"").trim();if(!d)return;let n="task-".concat(Date.now());s(s=>({...s,tasks:{...s.tasks,[n]:{id:n,content:d}},columns:{...s.columns,[e]:{...s.columns[e],taskIds:[...s.columns[e].taskIds,n]}}})),r(s=>({...s,[e]:""}))},h=e=>c({id:e.id,text:e.content}),b=()=>{s(e=>({...e,tasks:{...e.tasks,[o.id]:{...e.tasks[o.id],content:o.text}}})),c({id:null,text:""})},g=e=>{s(s=>{let{[e]:t,...d}=s.tasks,n={};for(let t of Object.values(s.columns))n[t.id]={...t,taskIds:t.taskIds.filter(s=>s!==e)};return{...s,tasks:d,columns:n}})};return e?(0,d.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,d.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["Kanban Board ",x&&"⏳"]}),(0,d.jsx)(l.JY,{onDragEnd:m,children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.columnOrder.map(s=>{let n=e.columns[s],a=n.taskIds.map(s=>e.tasks[s]);return(0,d.jsx)(l.gL,{droppableId:n.id,children:e=>(0,d.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"bg-white rounded-lg shadow p-4 flex flex-col",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold",children:n.title}),(0,d.jsx)("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-sm",children:a.length})]}),(0,d.jsxs)("div",{className:"flex-1 space-y-2",children:[a.map((e,s)=>(0,d.jsx)(l.sx,{draggableId:e.id,index:s,children:s=>(0,d.jsx)("div",{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,className:"bg-gray-100 rounded p-2 relative hover:bg-gray-200 transition",children:o.id===e.id?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("input",{className:"w-full border rounded p-1",value:o.text,onChange:e=>c(s=>({...s,text:e.target.value}))}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:b,className:"px-2 py-1 bg-green-600 text-white rounded text-sm",children:"Save"}),(0,d.jsx)("button",{onClick:()=>c({id:null,text:""}),className:"px-2 py-1 bg-gray-400 text-white rounded text-sm",children:"Cancel"})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:e.content}),(0,d.jsxs)("div",{className:"absolute top-1 right-1 flex space-x-1",children:[(0,d.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 text-xs hover:underline",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>g(e.id),className:"text-red-600 text-xs hover:underline",children:"Delete"})]})]})})},e.id)),e.placeholder]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("input",{type:"text",placeholder:"+ Add new task",className:"w-full border px-2 py-1 rounded mb-2 text-sm",value:t[n.id]||"",onChange:e=>r(s=>({...s,[n.id]:e.target.value}))}),(0,d.jsx)("button",{onClick:()=>p(n.id),className:"w-full bg-indigo-600 text-white py-1 rounded text-sm hover:bg-indigo-700 transition",children:"Add"})]})]})},n.id)})})})]}):(0,d.jsx)("p",{children:"Loading board…"})}},8593:(e,s,t)=>{Promise.resolve().then(t.bind(t,2411))}},e=>{var s=s=>e(e.s=s);e.O(0,[309,874,441,684,358],()=>s(8593)),_N_E=e.O()}]);