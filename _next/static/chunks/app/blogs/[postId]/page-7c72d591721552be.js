(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{41625:(e,t,s)=>{Promise.resolve().then(s.bind(s,44122))},44122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),r=s(12115),n=s(18999),c=s(63233);function o(){let{storyId:e}=(0,n.useParams)(),[t,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(""),[i,m]=(0,r.useState)(""),[d,u]=(0,r.useState)(!0),p=async()=>{u(!0);let{data:t,error:a}=await c.N.from("story_comments").select("*").eq("story_id",e).order("created_at",{ascending:!0});a?console.error(a):s(t||[]),u(!1)};(0,r.useEffect)(()=>{e&&p()},[e]);let h=async t=>{if(t.preventDefault(),!o.trim()||!i.trim())return;let{error:s}=await c.N.from("story_comments").insert({story_id:e,author:o.trim(),content:i.trim()});s?console.error(s):(l(""),m(""),p())};return(0,a.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Comments"}),d?(0,a.jsx)("p",{children:"Loading commentsâ€¦"}):(0,a.jsx)("ul",{className:"space-y-2",children:t.map(e=>(0,a.jsxs)("li",{className:"p-4 bg-gray-100 rounded",children:[(0,a.jsx)("p",{className:"font-bold",children:e.author}),(0,a.jsx)("p",{className:"mt-1",children:e.content}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.created_at).toLocaleString()})]},e.id))}),(0,a.jsxs)("form",{onSubmit:h,className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Your name",value:o,onChange:e=>l(e.target.value),className:"w-full p-2 border rounded"}),(0,a.jsx)("textarea",{placeholder:"Your comment",value:i,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded h-24"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Post Comment"})]})]})}},63233:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(34982).UU)("https://rkowgbocbhrkagikzcpb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrb3dnYm9jYmhya2FnaWt6Y3BiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAwNzQ4ODMsImV4cCI6MjA2NTY1MDg4M30.I36ZsWTPBO2Ki25iX8ZJYTcVXsvWhPakp1eovPpDwvc")}},e=>{var t=t=>e(e.s=t);e.O(0,[982,441,684,358],()=>t(41625)),_N_E=e.O()}]);